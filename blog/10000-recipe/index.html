<!doctype html><html lang=ko-kr dir=ltr><head><meta charset=UTF-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="index, follow"><meta name=author content><meta name=keywords content="크롤링,Python,BeautifulSoup,requests,웹 스크래핑,데이터 수집,JSON,웹 자동화,만개의 레시피"><meta name=description content="만개의 레시피 웹사이트에서 레시피 데이터를 크롤링하는 방법입니다. 카테고리, 레시피 목록, 레시피 상세정보, 평점, 요리 후기, 댓글 등 다양한 데이터를 BeautifulSoup과 …"><meta name=theme-color media="(prefers-color-scheme: light)" content="#ffffff"><meta name=theme-color media="(prefers-color-scheme: dark)" content="#343a40"><meta name=color-scheme content="light dark"><link rel=icon href=https://minyeamer.github.io/images/favicons/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://minyeamer.github.io/images/favicons/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://minyeamer.github.io/images/favicons/favicon-32x32.png><link rel=apple-touch-icon href=https://minyeamer.github.io/images/favicons/apple-touch-icon.png><link rel=mask-icon href=https://minyeamer.github.io/images/favicons/apple-touch-icon.png><meta name=google-site-verification content="u1tWcHmHUZWfFT1cHaku6sqU-bK40N3WLR-C-4VUWN0"><meta name=naver-site-verification content="6eaf8e9da1a6104780f056f1a7797fe5a3a5a0da"><meta property="og:title" content="[Python] 만개의 레시피 크롤링 - BeautifulSoup, requests로 레시피·평점·댓글 수집"><meta property="og:description" content="만개의 레시피 웹사이트에서 레시피 데이터를 크롤링하는 방법입니다. 카테고리, 레시피 목록, 레시피 상세정보, 평점, 요리 후기, 댓글 등 다양한 데이터를 BeautifulSoup과 …"><meta property="og:type" content="article"><meta property="og:url" content="https://minyeamer.github.io/blog/10000-recipe/"><meta property="og:image" content="https://dl.dropboxusercontent.com/scl/fi/vjq1dd2vnsj3kwa7jpy6m/10000-recipe-00-main.webp?rlkey=rdv1pqcayg0334gp7zdu522z0&amp;raw=1"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-03-26T18:52:14+09:00"><meta property="article:modified_time" content="2023-03-26T18:52:14+09:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://dl.dropboxusercontent.com/scl/fi/vjq1dd2vnsj3kwa7jpy6m/10000-recipe-00-main.webp?rlkey=rdv1pqcayg0334gp7zdu522z0&amp;raw=1"><meta name=twitter:title content="[Python] 만개의 레시피 크롤링 - BeautifulSoup, requests로 레시피·평점·댓글 수집"><meta name=twitter:description content="만개의 레시피 웹사이트에서 레시피 데이터를 크롤링하는 방법입니다. 카테고리, 레시피 목록, 레시피 상세정보, 평점, 요리 후기, 댓글 등 다양한 데이터를 BeautifulSoup과 …"><meta name=twitter:site content="@https://x.com/minyeamer"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://minyeamer.github.io/posts/"},{"@type":"ListItem","position":2,"name":"[Python] 만개의 레시피 크롤링 - BeautifulSoup, requests로 레시피·평점·댓글 수집","item":"https://minyeamer.github.io/blog/10000-recipe/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"[Python] 만개의 레시피 크롤링 - BeautifulSoup, requests로 레시피·평점·댓글 수집","name":"[Python] 만개의 레시피 크롤링 - BeautifulSoup, requests로 레시피·평점·댓글 수집","description":"만개의 레시피 웹사이트에서 레시피 데이터를 크롤링하는 방법입니다. 카테고리, 레시피 목록, 레시피 상세정보, 평점, 요리 후기, 댓글 등 다양한 데이터를 BeautifulSoup과 requests로 수집하고 JSON 구조로 변환하는 과정을 다룹니다. 데이터베이스 스키마 설계부터 실제 크롤링 구현까지 완전한 예제 코드를 제공합니다.\n","keywords":["크롤링, Python, BeautifulSoup, requests, 웹 스크래핑, 데이터 수집, JSON, 웹 자동화, 만개의 레시피"],"articleBody":"최근 레시피 생성을 목적으로 한 사이드 프로젝트에 참여하게 되었는데 모델 학습을 위한 만개의 레시피 데이터 크롤링을 진행해보았습니다.\n스키마 구성 #기존엔 레시피 명칭과 음식 재료 정보만을 수집할 계획이었지만, 만개의 레시피의 각 페이지를 살펴보면서 추가적으로 가져갈만한 데이터가 있음을 확인하여 우선적으로 테이블 관계 및 스키마를 구성해보았습니다.\n초기에 만개의 레시피와 공공데이터를 데이터 소스로 삼았기 때문에, 만개의 레시피에 대한 DB _10000, 공공데이터에 대한 DB food로 구성했습니다.\n_10000 DB 내 테이블은 만개의 레시피 내 각각의 페이지에서 가져온 데이터로 구성되며, 크게 카테고리, 레시피, 사용자 단위로 구분할 수 있습니다.\n만개의 레시피 데이터 수집 #크롤링에서 데이터 요청 및 가공을 위해 정의된 유틸리티 함수들이 있는데, 별도로 코드를 보여주지는 않고 해당 함수가 호출될 때 간단히 어떤 동작을 하는지만 전달드립니다.\n카테고리 추출 #만개의 레시피 카테고리는 레시피 검색 페이지에서 간단하게 추출할 수 있으므로, 개발자 도구 또는 requests에 대한 응답에서 카테고리에 해당하는 부분을 가져옵니다. 여기서 get_headers() 함수는 User-Agent 등 기본적인 브라우저 정보가 담긴 헤더를 반환합니다.\nCopy python url = \"https://www.10000recipe.com/recipe/list.html\" headers = get_headers(url, referer=url) headers[\"upgrade-insecure-requests\"] = '1' response = session.get(url, params=params, headers=headers) source = BeautifulSoup(response.text, \"html.parser\") cate_list = source.select_one(\"div.cate_list\") pattern = \"javascript:goSearchRecipe([\\d\\w()',]+)\" raw_cat = [(re_get(pattern, cat.attrs[\"href\"]),cat.text) for cat in cate_list.select(\"a\") if \"href\" in cat.attrs] cat_map = lambda catType, catId, catName: {\"categoryId\":catId, \"categoryType\":catType, \"categoryName\":catName} categories = [cat_map(*literal_eval(data), name) for data, name in raw_cat] categories = pd.DataFrame(categories) categories = categories[categories[\"categoryId\"]!=''] categories.head()데이터 수집 결과 아래와 같은 구조의 데이터를 획득할 수 있습니다.\ncategoryId categoryType categoryName 63 cat4 밑반찬 56 cat4 메인반찬 54 cat4 국/탕 55 cat4 찌개 60 cat4 디저트 레시피 목록 추출 #레시피 검색 페이지는 검색어, 정렬 기준, 페이지, 카테고리를 쿼리로 받습니다. 레시피 목록을 추출하는데 검색어나 카테고리는 필요하지 않고 동일한 정렬 기준에서 수집하기 때문에 데이터 수집 시에는 페이지에 반복문을 적용하여 데이터가 존재하는 범위를 가져올 것입니다.\nCopy python ORDER_MAP = {\"정확순\":\"accuracy\", \"최신순\":\"date\", \"추천순\":\"reco\"} get_params = lambda **kwargs: {k:v for k,v in kwargs.items() if v} uri = \"https://www.10000recipe.com/recipe/\" def fetch(session: requests.Session, query=str(), sortType=\"추천순\", page=1, cat1=str(), cat2=str(), cat3=str(), cat4=str(), **kwargs) -\u003e List[str]: url = uri+\"list.html\" params = get_params(q=query, order=ORDER_MAP[sortType], page=page, cat1=cat1, cat2=cat2, cat3=cat3, cat4=cat4) headers = get_headers(url, referer=url) headers[\"upgrade-insecure-requests\"] = '1' response = session.get(url, params=params, headers=headers) return parse(response.text, **kwargs) def parse(response: str, **kwargs) -\u003e List[str]: source = BeautifulSoup(response, 'html.parser') uris = source.select(\"a.common_sp_link\") ids = [uri.attrs[\"href\"].split('/')[-1] for uri in uris if \"href\" in uri.attrs] return ids데이터 수집 결과로는 문자열 타입의 레시피 ID 목록을 획득할 수 있습니다.\n레시피 정보 추출 #레시피 ID로 접근할 수 있는 레시피 상세 정보 페이지에서 레시피 정보에 대한 데이터를 추출합니다. 소스코드 내에서 레시피 정보가 JSON 형식으로 존재하기 때문에 일일히 HTML 태그를 파싱할 필요 없이 데이터를 한번에 JSON 오브젝트로 가져올 수 있습니다.\n데이터를 가공하는 map_recipe() 함수 내에서 cast_int()는 데이터를 정수형으로 변환할 때 에러가 발생하면 기본값 0을 반환하는 함수이고, hier_get()은 중첩 딕셔너리의에 단계별 키 목록에 대한 값을 안전하게 가져오기 위한 함수입니다.\nCopy python uri = \"https://www.10000recipe.com/recipe/\" def fetch(session: requests.Session, recipeId: str, **kwargs) -\u003e Dict: url = uri+recipeId # https://www.10000recipe.com/recipe/6997297 headers = get_headers(url, referer=uri+\"list.html\") headers[\"upgrade-insecure-requests\"] = '1' response = session.get(url, headers=headers) return parse(response.text, recipeId, **kwargs) def parse(response: str, recipeId: str, **kwargs) -\u003e Dict: source = BeautifulSoup(response, 'html.parser') raw_json = source.select_one(\"script[type=\\\"application/ld+json\\\"]\").text try: data = json.loads(raw_json) except: data = literal_eval(raw_json) return map_recipe(data, recipeId, source, **kwargs) def map_recipe(data: Dict, recipeId: str, source=None, **kwargs) -\u003e Dict: recipe_info = {\"recipeId\": recipeId} recipe_info[\"name\"] = data.get(\"name\") recipe_info[\"author\"] = hier_get(data, [\"author\",\"name\"]) recipe_info[\"ratingValue\"] = cast_int(hier_get(data, [\"aggregateRating\",\"ratingValue\"])) recipe_info[\"reviewCount\"] = cast_int(hier_get(data, [\"aggregateRating\",\"reviewCount\"])) recipe_info[\"totalTime\"] = data.get(\"totalTime\") recipe_info[\"recipeYield\"] = data.get(\"recipeYield\") try: recipe_info[\"recipeIngredient\"] = ','.join(data[\"recipeIngredient\"]) except: recipe_info[\"recipeIngredient\"] = extract_ingredient(source, **kwargs) recipe_info[\"recipeInstructions\"] = '\\n'.join( [step.get(\"text\",str()) for step in data.get(\"recipeInstructions\",list()) if isinstance(step, dict)]) recipe_info[\"createDate\"] = data.get(\"datePublished\") return recipe_info def extract_ingredient(source: Tag, **kwargs) -\u003e str: cont_ingre = source.select_one(\"div.cont_ingre\") if cont_ingre: return [ingre.split() for ingre in cont_ingre.select_one(\"dd\").text.split(',')] else: return str()데이터 수집 결과 아래와 같이 정리된 딕셔너리를 얻을 수 있습니다.\nCopy python { \"recipeId\": \"6997297\", \"name\": \"두부짜조\", \"author\": \"호이호이\", \"ratingValue\": 5, \"reviewCount\": 1, \"totalTime\": \"PT20M\", \"recipeYield\": \"1 servings\", \"recipeIngredient\": \"두부 30g,라이스페이퍼 2장,돼지고기 5g,...\", \"recipeInstructions\": \"부위는 상관없지만 저는 저렴하고...\", \"createDate\": \"2023-02-19T13:37:04+09:00\" }실질적으로 활용할 데이터는 레시피명 name과 재료명인 recipeIngredient이며, 평점, 리뷰 수, 조리순서 등도 추가적인 분석을 통해 활용성을 기대해볼 수 있습니다.\n요리 후기 추출 #동일한 레시피 상세 정보 페이지에서 요리 후기에 대한 데이터를 추출할 수 있습니다.\n단, 요리 후기는 JSON 형식으로 정리되어 있지 않기 때문에 HTML 소스를 파싱하여 대상 문자열을 추출해야 합니다.\n데이터를 가공하는 map_review() 함수 내에서 re_get()은 정규표현식 패턴에 매칭되는 문자열을 추출하는 함수이고, select_text()는 BeautifulSoup 태그에서 CSS Selector로 안전하게 문자열을 추출하는 함수입니다.\nCopy python GENDER = {\"info_name_m\":\"M\", \"info_name_f\":\"F\"} uri = \"https://www.10000recipe.com/recipe/\" rid_ptn = \"replyReviewDiv_(\\d+)\" uid_ptn = \"/profile/review.html\\?uid=([\\d\\w]+)\" date_ptn = \"(\\d{4}-\\d{2}-\\d{2} \\d{2}:\\d{2}:\\d{2})\" def fetch(session: requests.Session, recipeId: str, **kwargs) -\u003e List[Dict]: url = uri+recipeId headers = get_headers(url, referer=uri+\"list.html\") headers[\"upgrade-insecure-requests\"] = '1' response = session.get(url, headers=headers) return parse(response.text, recipeId, **kwargs) def parse(response: str, recipeId: str, **kwargs) -\u003e List[Dict]: source = BeautifulSoup(response, 'html.parser') reply_divs = source.select(\"div.view_reply\") review_div = [div for div in reply_divs if div.select_one(\"div.reply_tit\").text.strip().startswith(\"요리 후기\")] if review_div: review_list = review_div[0].select(\"div.reply_list\") return [map_review(review, recipeId, **kwargs) for review in review_list] else: return list() def map_review(data: Tag, recipeId: str, **kwargs) -\u003e Dict: review_info = dict() review_info[\"reviewId\"] = re_get(rid_ptn, data.select(\"div\")[-1].attrs.get(\"id\")) review_info[\"recipeId\"] = recipeId review_info[\"userId\"] = re_get(uid_ptn, data.select_one(\"a\").attrs.get(\"href\")) review_info[\"contents\"] = select_text(data, \"p.reply_list_cont\") detail = data.select_one(\"h4.media-heading\") if detail: review_info[\"userName\"] = select_text(detail, \"b\") gender = detail.select_one(\"b\").attrs.get(\"class\") review_info[\"userGender\"] = GENDER.get(gender[0]) if gender else None review_info[\"createDate\"] = re_get(date_ptn, detail.text) return review_info데이터 수집 결과 아래와 같이 정리된 딕셔너리를 얻을 수 있습니다.\n여기서 요리 후기와 별도로 사용자 명칭과 성별을 추출할 수 있습니다.\nCopy python { \"reviewId\": \"395018\", \"recipeId\": \"6843136\", \"userId\": \"58031746\", \"contents\": \"정말 간단한데 중불로하니 좀 태워먹었... 맛은 있네욬ㅋㅋㅋㅋㅋ다음엔 중불이랑 약불 사이로 함 더해바야겠어욬ㅋㅋㅋㄱㅋㅋ감삼둥..♡♡\", \"userName\": \"나찡as\", \"userGender\": \"F\", \"createDate\": \"2020-11-09 17:14:02\" }댓글 추출 #레시피 상세 정보 페이지에서 댓글은 미리보기만이 제공되며 전체 댓글을 확인하기 위해서는 별도의 페이지에 접속해야 합니다.\n해당 페이지의 출력 결과에서도 요리 후기와 같은 방식으로 HTML 소스를 파싱하여 대상 문자열을 추출해야 합니다.\nCopy python GENDER = {\"info_name_m\":\"M\", \"info_name_f\":\"F\"} uri = \"https://www.10000recipe.com/recipe/\" cid_ptn = \"replyCommentDiv_(\\d+)\" uid_ptn = \"/profile/recipe_comment.html\\?uid=([\\d\\w]+)\" date_ptn = \"(\\d{4}-\\d{2}-\\d{2} \\d{2}:\\d{2})\" def fetch(session: requests.Session, recipeId: str, page=1, **kwargs) -\u003e List[Dict]: url = uri+\"ajax.html\" params = dict(q_mode=\"getListComment\", seq=recipeId, page=page) headers = get_headers(url, referer=uri+recipeId) headers[\"upgrade-insecure-requests\"] = '1' response = session.get(url, params=params, headers=headers) return parse(response.text, recipeId, **kwargs) def parse(response: str, recipeId: str, **kwargs) -\u003e List[Dict]: source = BeautifulSoup(response, 'html.parser') comment_list = source.select(\"div.reply_list\") return [map_comment(comment, recipeId, **kwargs) for comment in comment_list] def map_comment(data: Tag, recipeId: str, **kwargs) -\u003e Dict: comment_info = dict() comment_info[\"commentId\"] = re_get(cid_ptn, data.select(\"div\")[-1].attrs.get(\"id\")) comment_info[\"recipeId\"] = recipeId comment_info[\"userId\"] = re_get(uid_ptn, data.select_one(\"a\").attrs.get(\"href\")) comment_info[\"contents\"] = select_text(data, \"div.media-body\").split('|')[-1] detail = data.select_one(\"h4.media-heading\") if detail: comment_info[\"userName\"] = select_text(detail, \"b\") gender = detail.select_one(\"b\").attrs.get(\"class\") comment_info[\"userGender\"] = GENDER.get(gender[0]) if gender else None comment_info[\"createDate\"] = re_get(date_ptn, detail.text) return comment_info review = fetch(session, \"6843136\") review[0]데이터 수집 결과 아래와 같이 정리된 딕셔너리를 얻을 수 있습니다.\n데이터 구조는 요리 후기와 동일합니다.\nCopy python { \"commentId\": \"39693405\", \"recipeId\": \"6843136\", \"userId\": \"89382542\", \"contents\": \"신고그러네여..재료양이..ㅜ\", \"userName\": \"휘아여\", \"userGender\": \"F\", \"createDate\": \"2022-03-18 00:02\" }","wordCount":"1062","inLanguage":"ko","image":"https:\/\/dl.dropboxusercontent.com\/scl\/fi\/vjq1dd2vnsj3kwa7jpy6m\/10000-recipe-00-main.webp?rlkey=rdv1pqcayg0334gp7zdu522z0\u0026raw=1","datePublished":"2023-03-26T18:52:14+09:00","dateModified":"2023-03-26T18:52:14+09:00","author":{"@type":"Person","name":"minyeamer"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://minyeamer.github.io/blog/10000-recipe/"},"publisher":{"@type":"Person","name":"Minystory","logo":{"@type":"ImageObject","url":"https://minyeamer.github.io/images/favicons/favicon.ico"}}}</script><script>(function(){const e=256+768*1.3;window.innerWidth>e&&localStorage.getItem("menu-expanded")==="false"&&document.documentElement.classList.add("menu-initial-collapsed")})()</script><title>[Python] 만개의 레시피 크롤링 - BeautifulSoup, requests로 레시피·평점·댓글 수집</title><link rel=manifest href=/data/manifest.json><link rel=canonical href=https://minyeamer.github.io/blog/10000-recipe/><link rel=stylesheet href=/main.min.1435ffc4437e2d099b34e2aa96f03e235a206db23ea465bde5f86811a7108f83.css integrity="sha256-FDX/xEN+LQmbNOKqlvA+I1ogbbI+pGW95fhoEacQj4M=" crossorigin=anonymous><script async src="https://www.googletagmanager.com/gtag/js?id=G-BJ8Z9RMBPJ"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-BJ8Z9RMBPJ")</script><script defer src=/sw.min.6f6f90fcb8eb1c49ec389838e6b801d0de19430b8e516902f8d75c3c8bd98739.js integrity="sha256-b2+Q/LjrHEnsOJg45rgB0N4ZQwuOUWkC+NdcPIvZhzk=" crossorigin=anonymous></script><script>(function(){const e=console.warn;console.warn=function(...n){const t=(new Error).stack||"";if(t.includes("highlight.min.js")||t.includes("highlightjs-line-numbers"))return;e.apply(console,n)}})()</script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/highlight.min.js crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlightjs-line-numbers.js/2.9.0/highlightjs-line-numbers.min.js crossorigin=anonymous></script><script>document.addEventListener("DOMContentLoaded",function(){typeof hljs!="undefined"&&(hljs.highlightAll(),typeof hljs.initLineNumbersOnLoad=="function"&&hljs.initLineNumbersOnLoad())})</script><script>window.siteI18n=window.siteI18n||{},window.siteI18n.defaultLang="en"</script><script>window.siteI18n.dataUrl="/data/i18n.min.a69d97976d04e681499d74d71f0019de3d6ed9f29a55bc606a9459d1454b3b65.json"</script><script>window.siteI18n.initData=function(){return window.siteI18n.data?Promise.resolve(window.siteI18n.data):fetch(window.siteI18n.dataUrl).then(e=>{if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);return e.json()}).then(e=>(window.siteI18n.data=e,window.siteI18n.data))},window.siteI18n.getLanguage=function(e={}){const s="site-language",t=localStorage.getItem(s);if(t)return t;const n=(navigator.language||navigator.userLanguage).split("-")[0];return!e||e[n]?n:window.siteI18n.defaultLang},window.siteI18n.translate=function(e,t=""){if(window.siteI18n.data){const n=window.siteI18n.getLanguage(),t=window.siteI18n.data[n];if(t&&e in t)return t[e]}return t},void window.siteI18n.initData().catch(()=>{})</script><script defer src=/js/core/i18n.min.c076e5ad51c454cca138121312827bfde8c5526a930ce57cea2207f501fea0d7.js integrity="sha256-wHblrVHEVMyhOBITEoJ7/ejFUmqTDOV86iIH9QH+oNc=" crossorigin=anonymous></script><script defer src=/js/partials/scroll-progress.min.841ade7e507a5f6d59c4e7bf2fe2b2ca034070677ff7957eec55610a024dd776.js integrity="sha256-hBreflB6X21ZxOe/L+KyygNAcGd/95V+7FVhCgJN13Y=" crossorigin=anonymous></script><script defer src=/js/partials/menu-toggle.min.e4c6c0cbf938a3d475fffe81471742bb460a77af62c865617af554b992375da9.js integrity="sha256-5MbAy/k4o9R1//6BRxdCu0YKd69iyGVhevVUuZI3Xak=" crossorigin=anonymous></script><script defer src=/js/partials/toc-toggle.min.eb96c48129742c9454fd93d56aed2e6c2d69bf4853d82204b2e53662e92f02cc.js integrity="sha256-65bEgSl0LJRU/ZPVau0ubC1pv0hT2CIEsuU2YukvAsw=" crossorigin=anonymous></script><script defer src=/js/core/set-theme.min.3ffcf0a1423dfbec7dc2da84e7cd18933d2a4ebc1efd4058f2f3da1c4e6d10c3.js integrity="sha256-P/zwoUI9++x9wtqE580Ykz0qTrwe/UBY8vPaHE5tEMM=" crossorigin=anonymous></script><script defer src=/js/shortcodes/copy-code.min.68a0c392faa93e1c6ebb981074928a99da92c62b203f5d43120539057e9e299e.js integrity="sha256-aKDDkvqpPhxuu5gQdJKKmdqSxisgP11DEgU5BX6eKZ4=" crossorigin=anonymous></script><script defer src=/js/partials/toc-highlight.min.7917ead4ecb7378779bfbf3f988251ac76bd55ca7f12fd5919870777dbcd6095.js integrity="sha256-eRfq1Oy3N4d5v78/mIJRrHa9Vcp/Ev1ZGYcHd9vNYJU=" crossorigin=anonymous></script><script defer src=/js/partials/reading-time.min.1063c3a4b82c1c1f36f88704c4544b75c39c2707d86c09aa7098d2963e6d3835.js integrity="sha256-EGPDpLgsHB82+IcExFRLdcOcJwfYbAmqcJjSlj5tODU=" crossorigin=anonymous></script><script defer src=/js/shortcodes/image-zoom.min.bb446c50cbec91f1b4fdfbb9f695d753ef4811f43de0a9411201c8466ffe204a.js integrity="sha256-u0RsUMvskfG0/fu59pXXU+9IEfQ94KlBEgHIRm/+IEo=" crossorigin=anonymous></script><script defer src=/js/shortcodes/data-table.min.d20aaf7f506ee989f91746098231f979e58b8435513de0d4f05eefb9c45743e7.js integrity="sha256-0gqvf1Bu6Yn5F0YJgjH5eeWLhDVRPeDU8F7vucRXQ+c=" crossorigin=anonymous></script><script>window.siteSearch=window.siteSearch||{}</script><script>window.siteSearch.contentUrl="/data/content.min.1341b710bcb1237a3de40b7ea09b611faa87eb21d029e7f9aae02b388dc2845d.json"</script><script>window.siteSearch.categoriesUrl="/data/categories.min.a110e9708cdf79e3dc8d271224586cc9deffc0232514190c37e24dc74470851c.json"</script><script>window.siteSearch.tagsUrl="/data/tags.min.2bf3b2cc5eb2fb935cabd6d9a5eebd1f4f9295cdc2c0d61e9c0a3ea424d1c5b2.json"</script><script defer src=/fuse.min.js></script><script defer src=/js/search/init.min.ee793e2de351fef268c6642567b4af23bd3763c2cb74f767e7240807e394417d.js integrity="sha256-7nk+LeNR/vJoxmQlZ7SvI703Y8LLdPdn5yQIB+OUQX0=" crossorigin=anonymous></script><script defer src=/js/search/input.min.c66bcb412051f2f9c3c6b5fa330c41ca187bd4e9a91447b672d8cbe1468bcfc9.js integrity="sha256-xmvLQSBR8vnDxrX6MwxByhh71OmpFEe2ctjL4UaLz8k=" crossorigin=anonymous></script><script defer src=/js/search/list.min.c4d349fad26719ac212bba171df921436c3a48a082fb1fc56a66ad20720eb7ed.js integrity="sha256-xNNJ+tJnGawhK7oXHfkhQ2w6SKCC+x/FamatIHIOt+0=" crossorigin=anonymous></script></head><body class="site-kind-page site-type-posts site-layout-post" dir=ltr><div class=scroll-progress><div class=scroll-progress-bar></div></div><label class=image-overlay-wrap for=image-overlay-toggle><input class="hidden toggle" type=checkbox id=image-overlay-toggle><div class=image-overlay></div></label><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><div class=menu-overlay></div><main class=container><aside class=site-menu aria-label=메뉴 data-i18n-id=menu.aside.tooltip data-i18n-attrs=aira-label><div class=menu-content><nav><div class=menu-profile><div class=profile-image-wrap><a href=https://minyeamer.github.io/><img src=/images/profile/menu.jpg alt=Profile class=profile-image decoding=async></a></div><h2 class=profile-title><a class="flex align-center" href=https://minyeamer.github.io/><span>Minystory</span></a></h2></div><div class=menu-links><a href=https://github.com/minyeamer target=_blank id=github-link title=GitHub><i class=icon-github></i>
</a><a href=/categories/ id=categories-link title=Categories><i class=icon-folder></i>
</a><a href=/tags/ id=tags-link title=Tags><i class=icon-tags></i>
</a><button class=dark-mode-toggle id=theme-toggle-button aria-label="Toggle color scheme">
<i class=icon-moon></i></button></div><div class=menu-search id=search-input data-hotkeys=s/ role=button tabindex=0 aria-label=검색 data-i18n-id=search.action.label data-i18n-attrs=aira-label><i class="icon-search search-icon"></i>
<span class=search-placeholder data-i18n-id=search.input.label data-i18n-text='{"`/`": "$code"}'><code>/</code> 를 눌러 검색하세요</span></div><div class=menu-categories><input type=checkbox class="hidden toggle" id=categories-control checked>
<label for=categories-control class="categories-label categories-toggle"><a href=/categories/ class=categories-root><i class=icon-folder></i>
<span data-i18n-id=categories.root.label data-i18n-text>전체
</span><span class=category-count>(41)</span>
</a><i class="icon-chevron-down categories-arrow"></i></label><ul><li><input type=checkbox class="hidden toggle" id=cat-algorithm>
<label for=cat-algorithm class="categories-label categories-toggle"><a href="/search/?category1=Algorithm"><i class=icon-folder></i>Algorithm<span class=category-count>(4)</span>
</a><i class="icon-chevron-down categories-arrow"></i></label><ul><li class=categories-label><a href="/search/?category1=Algorithm&category2=Graph"><i class=icon-file></i>Graph<span class=category-count>(1)</span></a></li><li class=categories-label><a href="/search/?category1=Algorithm&category2=Python"><i class=icon-file></i>Python<span class=category-count>(2)</span></a></li><li class=categories-label><a href="/search/?category1=Algorithm&category2=SQL"><i class=icon-file></i>SQL<span class=category-count>(1)</span></a></li></ul></li><li><input type=checkbox class="hidden toggle" id=cat-cloud>
<label for=cat-cloud class="categories-label categories-toggle"><a href="/search/?category1=Cloud"><i class=icon-folder></i>Cloud<span class=category-count>(2)</span>
</a><i class="icon-chevron-down categories-arrow"></i></label><ul><li class=categories-label><a href="/search/?category1=Cloud&category2=Kubernetes"><i class=icon-file></i>Kubernetes<span class=category-count>(2)</span></a></li></ul></li><li><input type=checkbox class="hidden toggle" id=cat-data-analysis>
<label for=cat-data-analysis class="categories-label categories-toggle"><a href="/search/?category1=Data%20Analysis"><i class=icon-folder></i>Data Analysis<span class=category-count>(3)</span>
</a><i class="icon-chevron-down categories-arrow"></i></label><ul><li class=categories-label><a href="/search/?category1=Data%20Analysis&category2=Dacon"><i class=icon-file></i>Dacon<span class=category-count>(3)</span></a></li></ul></li><li><input type=checkbox class="hidden toggle" id=cat-data-engineering>
<label for=cat-data-engineering class="categories-label categories-toggle"><a href="/search/?category1=Data%20Engineering"><i class=icon-folder></i>Data Engineering<span class=category-count>(19)</span>
</a><i class="icon-chevron-down categories-arrow"></i></label><ul><li class=categories-label><a href="/search/?category1=Data%20Engineering&category2=Apache%20Airflow"><i class=icon-file></i>Apache Airflow<span class=category-count>(7)</span></a></li><li class=categories-label><a href="/search/?category1=Data%20Engineering&category2=Apache%20Spark"><i class=icon-file></i>Apache Spark<span class=category-count>(8)</span></a></li><li class=categories-label><a href="/search/?category1=Data%20Engineering&category2=Crawling"><i class=icon-file></i>Crawling<span class=category-count>(4)</span></a></li></ul></li><li><input type=checkbox class="hidden toggle" id=cat-frontend>
<label for=cat-frontend class="categories-label categories-toggle"><a href="/search/?category1=Frontend"><i class=icon-folder></i>Frontend<span class=category-count>(10)</span>
</a><i class="icon-chevron-down categories-arrow"></i></label><ul><li class=categories-label><a href="/search/?category1=Frontend&category2=Blog"><i class=icon-file></i>Blog<span class=category-count>(10)</span></a></li></ul></li><li><input type=checkbox class="hidden toggle" id=cat-linux>
<label for=cat-linux class="categories-label categories-toggle"><a href="/search/?category1=Linux"><i class=icon-folder></i>Linux<span class=category-count>(1)</span>
</a><i class="icon-chevron-down categories-arrow"></i></label><ul><li class=categories-label><a href="/search/?category1=Linux&category2=Ubuntu"><i class=icon-file></i>Ubuntu<span class=category-count>(1)</span></a></li></ul></li><li><input type=checkbox class="hidden toggle" id=cat-project>
<label for=cat-project class="categories-label categories-toggle"><a href="/search/?category1=Project"><i class=icon-folder></i>Project<span class=category-count>(2)</span>
</a><i class="icon-chevron-down categories-arrow"></i></label><ul><li class=categories-label><a href="/search/?category1=Project&category2=Open%20Source"><i class=icon-file></i>Open Source<span class=category-count>(1)</span></a></li><li class=categories-label><a href="/search/?category1=Project&category2=Tools"><i class=icon-file></i>Tools<span class=category-count>(1)</span></a></li></ul></li></ul></div><div class=recent-posts><div class=recent-post-label><i class=icon-clock></i>
<span data-i18n-id=menu.recent.posts data-i18n-text>최신글</span></div><ul class=recent-post-list><li class=recent-post-item><a href=/blog/hugo-seotax-1/ title="Hugo 서택스(SeoTax) 테마 제작기 - 동적 렌더링으로 확장된 검색"><div class=recent-post-title>Hugo 서택스(SeoTax) 테마 제작기 - 동적 렌더링으로 확장된 검색</div><div class=recent-post-date><time datetime=2026-01-25>2026.01.25</time></div></a></li><li class=recent-post-item><a href=/blog/hugo-blog-5/ title="Hugo Disqus 댓글 연동 - 본문 레이아웃 개선하기 (헤더/푸터)"><div class=recent-post-title>Hugo Disqus 댓글 연동 - 본문 레이아웃 개선하기 (헤더/푸터)</div><div class=recent-post-date><time datetime=2025-12-15>2025.12.15</time></div></a></li><li class=recent-post-item><a href=/blog/hugo-blog-4/ title="Hugo 검색 기능 구현 - Fuse.js로 검색 인덱스 최적화하기"><div class=recent-post-title>Hugo 검색 기능 구현 - Fuse.js로 검색 인덱스 최적화하기</div><div class=recent-post-date><time datetime=2025-12-14>2025.12.14</time></div></a></li><li class=recent-post-item><a href=/blog/hugo-blog-3/ title="Hugo 분류(Taxonomies) 커스터마이징 - 태그/카테고리 템플릿 구현"><div class=recent-post-title>Hugo 분류(Taxonomies) 커스터마이징 - 태그/카테고리 템플릿 구현</div><div class=recent-post-date><time datetime=2025-11-22>2025.11.22</time></div></a></li><li class=recent-post-item><a href=/blog/hugo-blog-2/ title="Hugo Book 테마 커스터마이징 - 메뉴/목차/헤더 레이아웃 개선"><div class=recent-post-title>Hugo Book 테마 커스터마이징 - 메뉴/목차/헤더 레이아웃 개선</div><div class=recent-post-date><time datetime=2025-11-04>2025.11.04</time></div></a></li></ul></div></nav><script>(function(){var e=document.querySelector("aside .menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=main-wrap><header class=site-header><div class="flex align-center justify-between"><label for=menu-control aria-label="메뉴 접기/펼치기" title="메뉴 접기/펼치기" data-i18n-id=menu.toggle.tooltip data-i18n-attrs=aria-label,title><i class="icon-bars menu-icon" id=menu-icon></i></label><div class=mobile-search id=mobile-search-input role=button tabindex=0 aria-label=검색 data-i18n-id=search.action.label data-i18n-attrs=aria-label><i class="icon-search search-icon"></i>
<span class=mobile-title>Minystory</span>
<i class=mobile-title-pad></i></div><label for=toc-control aria-label="목차 접기/펼치기" title="목차 접기/펼치기" data-i18n-id=toc.toggle.tooltip data-i18n-attrs=aria-label,title><i class="icon-list menu-icon" id=toc-icon></i></label></div></header><article class="content-wrap markdown" id=content-wrap><header class=content-header><div class=content-category><a href="/search/?category1=Data%20Engineering&category2=Crawling" class=content-category-link>Data Engineering/Crawling</a></div><h1 class=content-title>[Python] 만개의 레시피 크롤링 - BeautifulSoup, requests로 레시피·평점·댓글 수집</h1><div class=content-datetime><time datetime=2023-03-26T18:52:14+09:00>2023. 03. 26. 18:52
</time><span>• </span><span id=reading-time>읽는데 9분</span></div></header><div class=content-cover-wrap><img src="https://dl.dropboxusercontent.com/scl/fi/vjq1dd2vnsj3kwa7jpy6m/10000-recipe-00-main.webp?rlkey=rdv1pqcayg0334gp7zdu522z0&amp;raw=1" class=content-cover alt="Cover Image" width=1920 height=586 decoding=async></div><p>최근 레시피 생성을 목적으로 한 사이드 프로젝트에 참여하게 되었는데
모델 학습을 위한 만개의 레시피 데이터 크롤링을 진행해보았습니다.</p><h2 id=스키마-구성>스키마 구성
<a class=anchor href=#%ec%8a%a4%ed%82%a4%eb%a7%88-%ea%b5%ac%ec%84%b1>#</a></h2><p>기존엔 레시피 명칭과 음식 재료 정보만을 수집할 계획이었지만,
만개의 레시피의 각 페이지를 살펴보면서 추가적으로 가져갈만한 데이터가 있음을 확인하여
우선적으로 테이블 관계 및 스키마를 구성해보았습니다.</p><p><label class=md-image for=md-image-toggle-0><input class="hidden toggle" type=checkbox id=md-image-toggle-0>
<img src="https://dl.dropboxusercontent.com/scl/fi/gqevx9a2rxsog4r031cks/10000-recipe-01-schema.webp?rlkey=776vsnrf34208z7zxdzbkewff&amp;raw=1" alt="만개의 레시피 스키마" width=1239 height=794 loading=lazy decoding=async></label></p><p>초기에 만개의 레시피와 공공데이터를 데이터 소스로 삼았기 때문에,
만개의 레시피에 대한 DB <code>_10000</code>, 공공데이터에 대한 DB <code>food</code>로 구성했습니다.</p><p><code>_10000</code> DB 내 테이블은 만개의 레시피 내 각각의 페이지에서 가져온 데이터로 구성되며,
크게 카테고리, 레시피, 사용자 단위로 구분할 수 있습니다.</p><h2 id=만개의-레시피-데이터-수집>만개의 레시피 데이터 수집
<a class=anchor href=#%eb%a7%8c%ea%b0%9c%ec%9d%98-%eb%a0%88%ec%8b%9c%ed%94%bc-%eb%8d%b0%ec%9d%b4%ed%84%b0-%ec%88%98%ec%a7%91>#</a></h2><p>크롤링에서 데이터 요청 및 가공을 위해 정의된 유틸리티 함수들이 있는데,
별도로 코드를 보여주지는 않고 해당 함수가 호출될 때 간단히 어떤 동작을 하는지만 전달드립니다.</p><h3 id=카테고리-추출>카테고리 추출
<a class=anchor href=#%ec%b9%b4%ed%85%8c%ea%b3%a0%eb%a6%ac-%ec%b6%94%ec%b6%9c>#</a></h3><p>만개의 레시피 카테고리는 레시피 검색 페이지에서 간단하게 추출할 수 있으므로,
개발자 도구 또는 requests에 대한 응답에서 카테고리에 해당하는 부분을 가져옵니다.
여기서 <code>get_headers()</code> 함수는 <code>User-Agent</code> 등 기본적인 브라우저 정보가 담긴 헤더를 반환합니다.</p><div class=sc-codeblock data-lang=python><div class=code-actions><button class="code-copy-button code-action" onclick=copyCode(this)>
<i class=icon-file-copy></i>Copy
</button>
<span class="code-language code-action">python</span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>url</span> <span class=o>=</span> <span class=s2>&#34;https://www.10000recipe.com/recipe/list.html&#34;</span>
</span></span><span class=line><span class=cl><span class=n>headers</span> <span class=o>=</span> <span class=n>get_headers</span><span class=p>(</span><span class=n>url</span><span class=p>,</span> <span class=n>referer</span><span class=o>=</span><span class=n>url</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>headers</span><span class=p>[</span><span class=s2>&#34;upgrade-insecure-requests&#34;</span><span class=p>]</span> <span class=o>=</span> <span class=s1>&#39;1&#39;</span>
</span></span><span class=line><span class=cl><span class=n>response</span> <span class=o>=</span> <span class=n>session</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>url</span><span class=p>,</span> <span class=n>params</span><span class=o>=</span><span class=n>params</span><span class=p>,</span> <span class=n>headers</span><span class=o>=</span><span class=n>headers</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>source</span> <span class=o>=</span> <span class=n>BeautifulSoup</span><span class=p>(</span><span class=n>response</span><span class=o>.</span><span class=n>text</span><span class=p>,</span> <span class=s2>&#34;html.parser&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>cate_list</span> <span class=o>=</span> <span class=n>source</span><span class=o>.</span><span class=n>select_one</span><span class=p>(</span><span class=s2>&#34;div.cate_list&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>pattern</span> <span class=o>=</span> <span class=s2>&#34;javascript:goSearchRecipe([\d\w()&#39;,]+)&#34;</span>
</span></span><span class=line><span class=cl><span class=n>raw_cat</span> <span class=o>=</span> <span class=p>[(</span><span class=n>re_get</span><span class=p>(</span><span class=n>pattern</span><span class=p>,</span> <span class=n>cat</span><span class=o>.</span><span class=n>attrs</span><span class=p>[</span><span class=s2>&#34;href&#34;</span><span class=p>]),</span><span class=n>cat</span><span class=o>.</span><span class=n>text</span><span class=p>)</span> <span class=k>for</span> <span class=n>cat</span> <span class=ow>in</span> <span class=n>cate_list</span><span class=o>.</span><span class=n>select</span><span class=p>(</span><span class=s2>&#34;a&#34;</span><span class=p>)</span> <span class=k>if</span> <span class=s2>&#34;href&#34;</span> <span class=ow>in</span> <span class=n>cat</span><span class=o>.</span><span class=n>attrs</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=n>cat_map</span> <span class=o>=</span> <span class=k>lambda</span> <span class=n>catType</span><span class=p>,</span> <span class=n>catId</span><span class=p>,</span> <span class=n>catName</span><span class=p>:</span> <span class=p>{</span><span class=s2>&#34;categoryId&#34;</span><span class=p>:</span><span class=n>catId</span><span class=p>,</span> <span class=s2>&#34;categoryType&#34;</span><span class=p>:</span><span class=n>catType</span><span class=p>,</span> <span class=s2>&#34;categoryName&#34;</span><span class=p>:</span><span class=n>catName</span><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=n>categories</span> <span class=o>=</span> <span class=p>[</span><span class=n>cat_map</span><span class=p>(</span><span class=o>*</span><span class=n>literal_eval</span><span class=p>(</span><span class=n>data</span><span class=p>),</span> <span class=n>name</span><span class=p>)</span> <span class=k>for</span> <span class=n>data</span><span class=p>,</span> <span class=n>name</span> <span class=ow>in</span> <span class=n>raw_cat</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=n>categories</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>DataFrame</span><span class=p>(</span><span class=n>categories</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>categories</span> <span class=o>=</span> <span class=n>categories</span><span class=p>[</span><span class=n>categories</span><span class=p>[</span><span class=s2>&#34;categoryId&#34;</span><span class=p>]</span><span class=o>!=</span><span class=s1>&#39;&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=n>categories</span><span class=o>.</span><span class=n>head</span><span class=p>()</span></span></span></code></pre></div></div><p>데이터 수집 결과 아래와 같은 구조의 데이터를 획득할 수 있습니다.</p><table><thead><tr><th style=text-align:center>categoryId</th><th style=text-align:center>categoryType</th><th style=text-align:center>categoryName</th></tr></thead><tbody><tr><td style=text-align:center>63</td><td style=text-align:center>cat4</td><td style=text-align:center>밑반찬</td></tr><tr><td style=text-align:center>56</td><td style=text-align:center>cat4</td><td style=text-align:center>메인반찬</td></tr><tr><td style=text-align:center>54</td><td style=text-align:center>cat4</td><td style=text-align:center>국/탕</td></tr><tr><td style=text-align:center>55</td><td style=text-align:center>cat4</td><td style=text-align:center>찌개</td></tr><tr><td style=text-align:center>60</td><td style=text-align:center>cat4</td><td style=text-align:center>디저트</td></tr></tbody></table><h3 id=레시피-목록-추출>레시피 목록 추출
<a class=anchor href=#%eb%a0%88%ec%8b%9c%ed%94%bc-%eb%aa%a9%eb%a1%9d-%ec%b6%94%ec%b6%9c>#</a></h3><p>레시피 검색 페이지는 검색어, 정렬 기준, 페이지, 카테고리를 쿼리로 받습니다.
레시피 목록을 추출하는데 검색어나 카테고리는 필요하지 않고 동일한 정렬 기준에서 수집하기 때문에
데이터 수집 시에는 페이지에 반복문을 적용하여 데이터가 존재하는 범위를 가져올 것입니다.</p><div class=sc-codeblock data-lang=python><div class=code-actions><button class="code-copy-button code-action" onclick=copyCode(this)>
<i class=icon-file-copy></i>Copy
</button>
<span class="code-language code-action">python</span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>ORDER_MAP</span> <span class=o>=</span> <span class=p>{</span><span class=s2>&#34;정확순&#34;</span><span class=p>:</span><span class=s2>&#34;accuracy&#34;</span><span class=p>,</span> <span class=s2>&#34;최신순&#34;</span><span class=p>:</span><span class=s2>&#34;date&#34;</span><span class=p>,</span> <span class=s2>&#34;추천순&#34;</span><span class=p>:</span><span class=s2>&#34;reco&#34;</span><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=n>get_params</span> <span class=o>=</span> <span class=k>lambda</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>:</span> <span class=p>{</span><span class=n>k</span><span class=p>:</span><span class=n>v</span> <span class=k>for</span> <span class=n>k</span><span class=p>,</span><span class=n>v</span> <span class=ow>in</span> <span class=n>kwargs</span><span class=o>.</span><span class=n>items</span><span class=p>()</span> <span class=k>if</span> <span class=n>v</span><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=n>uri</span> <span class=o>=</span> <span class=s2>&#34;https://www.10000recipe.com/recipe/&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>fetch</span><span class=p>(</span><span class=n>session</span><span class=p>:</span> <span class=n>requests</span><span class=o>.</span><span class=n>Session</span><span class=p>,</span> <span class=n>query</span><span class=o>=</span><span class=nb>str</span><span class=p>(),</span> <span class=n>sortType</span><span class=o>=</span><span class=s2>&#34;추천순&#34;</span><span class=p>,</span> <span class=n>page</span><span class=o>=</span><span class=mi>1</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>cat1</span><span class=o>=</span><span class=nb>str</span><span class=p>(),</span> <span class=n>cat2</span><span class=o>=</span><span class=nb>str</span><span class=p>(),</span> <span class=n>cat3</span><span class=o>=</span><span class=nb>str</span><span class=p>(),</span> <span class=n>cat4</span><span class=o>=</span><span class=nb>str</span><span class=p>(),</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>List</span><span class=p>[</span><span class=nb>str</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>    <span class=n>url</span> <span class=o>=</span> <span class=n>uri</span><span class=o>+</span><span class=s2>&#34;list.html&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>params</span> <span class=o>=</span> <span class=n>get_params</span><span class=p>(</span><span class=n>q</span><span class=o>=</span><span class=n>query</span><span class=p>,</span> <span class=n>order</span><span class=o>=</span><span class=n>ORDER_MAP</span><span class=p>[</span><span class=n>sortType</span><span class=p>],</span> <span class=n>page</span><span class=o>=</span><span class=n>page</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                        <span class=n>cat1</span><span class=o>=</span><span class=n>cat1</span><span class=p>,</span> <span class=n>cat2</span><span class=o>=</span><span class=n>cat2</span><span class=p>,</span> <span class=n>cat3</span><span class=o>=</span><span class=n>cat3</span><span class=p>,</span> <span class=n>cat4</span><span class=o>=</span><span class=n>cat4</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>headers</span> <span class=o>=</span> <span class=n>get_headers</span><span class=p>(</span><span class=n>url</span><span class=p>,</span> <span class=n>referer</span><span class=o>=</span><span class=n>url</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>headers</span><span class=p>[</span><span class=s2>&#34;upgrade-insecure-requests&#34;</span><span class=p>]</span> <span class=o>=</span> <span class=s1>&#39;1&#39;</span>
</span></span><span class=line><span class=cl>    <span class=n>response</span> <span class=o>=</span> <span class=n>session</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>url</span><span class=p>,</span> <span class=n>params</span><span class=o>=</span><span class=n>params</span><span class=p>,</span> <span class=n>headers</span><span class=o>=</span><span class=n>headers</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>parse</span><span class=p>(</span><span class=n>response</span><span class=o>.</span><span class=n>text</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>parse</span><span class=p>(</span><span class=n>response</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>List</span><span class=p>[</span><span class=nb>str</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>    <span class=n>source</span> <span class=o>=</span> <span class=n>BeautifulSoup</span><span class=p>(</span><span class=n>response</span><span class=p>,</span> <span class=s1>&#39;html.parser&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>uris</span> <span class=o>=</span> <span class=n>source</span><span class=o>.</span><span class=n>select</span><span class=p>(</span><span class=s2>&#34;a.common_sp_link&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>ids</span> <span class=o>=</span> <span class=p>[</span><span class=n>uri</span><span class=o>.</span><span class=n>attrs</span><span class=p>[</span><span class=s2>&#34;href&#34;</span><span class=p>]</span><span class=o>.</span><span class=n>split</span><span class=p>(</span><span class=s1>&#39;/&#39;</span><span class=p>)[</span><span class=o>-</span><span class=mi>1</span><span class=p>]</span> <span class=k>for</span> <span class=n>uri</span> <span class=ow>in</span> <span class=n>uris</span> <span class=k>if</span> <span class=s2>&#34;href&#34;</span> <span class=ow>in</span> <span class=n>uri</span><span class=o>.</span><span class=n>attrs</span><span class=p>]</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>ids</span></span></span></code></pre></div></div><p>데이터 수집 결과로는 문자열 타입의 레시피 ID 목록을 획득할 수 있습니다.</p><h3 id=레시피-정보-추출>레시피 정보 추출
<a class=anchor href=#%eb%a0%88%ec%8b%9c%ed%94%bc-%ec%a0%95%eb%b3%b4-%ec%b6%94%ec%b6%9c>#</a></h3><p>레시피 ID로 접근할 수 있는 레시피 상세 정보 페이지에서
레시피 정보에 대한 데이터를 추출합니다.
소스코드 내에서 레시피 정보가 JSON 형식으로 존재하기 때문에
일일히 HTML 태그를 파싱할 필요 없이 데이터를 한번에 JSON 오브젝트로 가져올 수 있습니다.</p><p>데이터를 가공하는 <code>map_recipe()</code> 함수 내에서
<code>cast_int()</code>는 데이터를 정수형으로 변환할 때 에러가 발생하면 기본값 0을 반환하는 함수이고,
<code>hier_get()</code>은 중첩 딕셔너리의에 단계별 키 목록에 대한 값을 안전하게 가져오기 위한 함수입니다.</p><div class=sc-codeblock data-lang=python><div class=code-actions><button class="code-copy-button code-action" onclick=copyCode(this)>
<i class=icon-file-copy></i>Copy
</button>
<span class="code-language code-action">python</span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>uri</span> <span class=o>=</span> <span class=s2>&#34;https://www.10000recipe.com/recipe/&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>fetch</span><span class=p>(</span><span class=n>session</span><span class=p>:</span> <span class=n>requests</span><span class=o>.</span><span class=n>Session</span><span class=p>,</span> <span class=n>recipeId</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Dict</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>url</span> <span class=o>=</span> <span class=n>uri</span><span class=o>+</span><span class=n>recipeId</span> <span class=c1># https://www.10000recipe.com/recipe/6997297</span>
</span></span><span class=line><span class=cl>    <span class=n>headers</span> <span class=o>=</span> <span class=n>get_headers</span><span class=p>(</span><span class=n>url</span><span class=p>,</span> <span class=n>referer</span><span class=o>=</span><span class=n>uri</span><span class=o>+</span><span class=s2>&#34;list.html&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>headers</span><span class=p>[</span><span class=s2>&#34;upgrade-insecure-requests&#34;</span><span class=p>]</span> <span class=o>=</span> <span class=s1>&#39;1&#39;</span>
</span></span><span class=line><span class=cl>    <span class=n>response</span> <span class=o>=</span> <span class=n>session</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>url</span><span class=p>,</span> <span class=n>headers</span><span class=o>=</span><span class=n>headers</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>parse</span><span class=p>(</span><span class=n>response</span><span class=o>.</span><span class=n>text</span><span class=p>,</span> <span class=n>recipeId</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>parse</span><span class=p>(</span><span class=n>response</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>recipeId</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Dict</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>source</span> <span class=o>=</span> <span class=n>BeautifulSoup</span><span class=p>(</span><span class=n>response</span><span class=p>,</span> <span class=s1>&#39;html.parser&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>raw_json</span> <span class=o>=</span> <span class=n>source</span><span class=o>.</span><span class=n>select_one</span><span class=p>(</span><span class=s2>&#34;script[type=</span><span class=se>\&#34;</span><span class=s2>application/ld+json</span><span class=se>\&#34;</span><span class=s2>]&#34;</span><span class=p>)</span><span class=o>.</span><span class=n>text</span>
</span></span><span class=line><span class=cl>    <span class=k>try</span><span class=p>:</span> <span class=n>data</span> <span class=o>=</span> <span class=n>json</span><span class=o>.</span><span class=n>loads</span><span class=p>(</span><span class=n>raw_json</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>except</span><span class=p>:</span> <span class=n>data</span> <span class=o>=</span> <span class=n>literal_eval</span><span class=p>(</span><span class=n>raw_json</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>map_recipe</span><span class=p>(</span><span class=n>data</span><span class=p>,</span> <span class=n>recipeId</span><span class=p>,</span> <span class=n>source</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>map_recipe</span><span class=p>(</span><span class=n>data</span><span class=p>:</span> <span class=n>Dict</span><span class=p>,</span> <span class=n>recipeId</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>source</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Dict</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>recipe_info</span> <span class=o>=</span> <span class=p>{</span><span class=s2>&#34;recipeId&#34;</span><span class=p>:</span> <span class=n>recipeId</span><span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=n>recipe_info</span><span class=p>[</span><span class=s2>&#34;name&#34;</span><span class=p>]</span> <span class=o>=</span> <span class=n>data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&#34;name&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>recipe_info</span><span class=p>[</span><span class=s2>&#34;author&#34;</span><span class=p>]</span> <span class=o>=</span> <span class=n>hier_get</span><span class=p>(</span><span class=n>data</span><span class=p>,</span> <span class=p>[</span><span class=s2>&#34;author&#34;</span><span class=p>,</span><span class=s2>&#34;name&#34;</span><span class=p>])</span>
</span></span><span class=line><span class=cl>    <span class=n>recipe_info</span><span class=p>[</span><span class=s2>&#34;ratingValue&#34;</span><span class=p>]</span> <span class=o>=</span> <span class=n>cast_int</span><span class=p>(</span><span class=n>hier_get</span><span class=p>(</span><span class=n>data</span><span class=p>,</span> <span class=p>[</span><span class=s2>&#34;aggregateRating&#34;</span><span class=p>,</span><span class=s2>&#34;ratingValue&#34;</span><span class=p>]))</span>
</span></span><span class=line><span class=cl>    <span class=n>recipe_info</span><span class=p>[</span><span class=s2>&#34;reviewCount&#34;</span><span class=p>]</span> <span class=o>=</span> <span class=n>cast_int</span><span class=p>(</span><span class=n>hier_get</span><span class=p>(</span><span class=n>data</span><span class=p>,</span> <span class=p>[</span><span class=s2>&#34;aggregateRating&#34;</span><span class=p>,</span><span class=s2>&#34;reviewCount&#34;</span><span class=p>]))</span>
</span></span><span class=line><span class=cl>    <span class=n>recipe_info</span><span class=p>[</span><span class=s2>&#34;totalTime&#34;</span><span class=p>]</span> <span class=o>=</span> <span class=n>data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&#34;totalTime&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>recipe_info</span><span class=p>[</span><span class=s2>&#34;recipeYield&#34;</span><span class=p>]</span> <span class=o>=</span> <span class=n>data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&#34;recipeYield&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>try</span><span class=p>:</span> <span class=n>recipe_info</span><span class=p>[</span><span class=s2>&#34;recipeIngredient&#34;</span><span class=p>]</span> <span class=o>=</span> <span class=s1>&#39;,&#39;</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>data</span><span class=p>[</span><span class=s2>&#34;recipeIngredient&#34;</span><span class=p>])</span>
</span></span><span class=line><span class=cl>    <span class=k>except</span><span class=p>:</span> <span class=n>recipe_info</span><span class=p>[</span><span class=s2>&#34;recipeIngredient&#34;</span><span class=p>]</span> <span class=o>=</span> <span class=n>extract_ingredient</span><span class=p>(</span><span class=n>source</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>recipe_info</span><span class=p>[</span><span class=s2>&#34;recipeInstructions&#34;</span><span class=p>]</span> <span class=o>=</span> <span class=s1>&#39;</span><span class=se>\n</span><span class=s1>&#39;</span><span class=o>.</span><span class=n>join</span><span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=p>[</span><span class=n>step</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&#34;text&#34;</span><span class=p>,</span><span class=nb>str</span><span class=p>())</span> <span class=k>for</span> <span class=n>step</span> <span class=ow>in</span> <span class=n>data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&#34;recipeInstructions&#34;</span><span class=p>,</span><span class=nb>list</span><span class=p>())</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>step</span><span class=p>,</span> <span class=nb>dict</span><span class=p>)])</span>
</span></span><span class=line><span class=cl>    <span class=n>recipe_info</span><span class=p>[</span><span class=s2>&#34;createDate&#34;</span><span class=p>]</span> <span class=o>=</span> <span class=n>data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&#34;datePublished&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>recipe_info</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>extract_ingredient</span><span class=p>(</span><span class=n>source</span><span class=p>:</span> <span class=n>Tag</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>str</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>cont_ingre</span> <span class=o>=</span> <span class=n>source</span><span class=o>.</span><span class=n>select_one</span><span class=p>(</span><span class=s2>&#34;div.cont_ingre&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=n>cont_ingre</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=p>[</span><span class=n>ingre</span><span class=o>.</span><span class=n>split</span><span class=p>()</span> <span class=k>for</span> <span class=n>ingre</span> <span class=ow>in</span> <span class=n>cont_ingre</span><span class=o>.</span><span class=n>select_one</span><span class=p>(</span><span class=s2>&#34;dd&#34;</span><span class=p>)</span><span class=o>.</span><span class=n>text</span><span class=o>.</span><span class=n>split</span><span class=p>(</span><span class=s1>&#39;,&#39;</span><span class=p>)]</span>
</span></span><span class=line><span class=cl>    <span class=k>else</span><span class=p>:</span> <span class=k>return</span> <span class=nb>str</span><span class=p>()</span></span></span></code></pre></div></div><p>데이터 수집 결과 아래와 같이 정리된 딕셔너리를 얻을 수 있습니다.</p><div class=sc-codeblock data-lang=python><div class=code-actions><button class="code-copy-button code-action" onclick=copyCode(this)>
<i class=icon-file-copy></i>Copy
</button>
<span class="code-language code-action">python</span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;recipeId&#34;</span><span class=p>:</span> <span class=s2>&#34;6997297&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;name&#34;</span><span class=p>:</span> <span class=s2>&#34;두부짜조&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;author&#34;</span><span class=p>:</span> <span class=s2>&#34;호이호이&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;ratingValue&#34;</span><span class=p>:</span> <span class=mi>5</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;reviewCount&#34;</span><span class=p>:</span> <span class=mi>1</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;totalTime&#34;</span><span class=p>:</span> <span class=s2>&#34;PT20M&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;recipeYield&#34;</span><span class=p>:</span> <span class=s2>&#34;1 servings&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;recipeIngredient&#34;</span><span class=p>:</span> <span class=s2>&#34;두부 30g,라이스페이퍼 2장,돼지고기 5g,...&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;recipeInstructions&#34;</span><span class=p>:</span> <span class=s2>&#34;부위는 상관없지만 저는 저렴하고...&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;createDate&#34;</span><span class=p>:</span> <span class=s2>&#34;2023-02-19T13:37:04+09:00&#34;</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div></div><p>실질적으로 활용할 데이터는 레시피명 <code>name</code>과 재료명인 <code>recipeIngredient</code>이며,
평점, 리뷰 수, 조리순서 등도 추가적인 분석을 통해 활용성을 기대해볼 수 있습니다.</p><h3 id=요리-후기-추출>요리 후기 추출
<a class=anchor href=#%ec%9a%94%eb%a6%ac-%ed%9b%84%ea%b8%b0-%ec%b6%94%ec%b6%9c>#</a></h3><p>동일한 레시피 상세 정보 페이지에서 요리 후기에 대한 데이터를 추출할 수 있습니다.</p><p>단, 요리 후기는 JSON 형식으로 정리되어 있지 않기 때문에
HTML 소스를 파싱하여 대상 문자열을 추출해야 합니다.</p><p>데이터를 가공하는 <code>map_review()</code> 함수 내에서
<code>re_get()</code>은 정규표현식 패턴에 매칭되는 문자열을 추출하는 함수이고,
<code>select_text()</code>는 BeautifulSoup 태그에서
CSS Selector로 안전하게 문자열을 추출하는 함수입니다.</p><div class=sc-codeblock data-lang=python><div class=code-actions><button class="code-copy-button code-action" onclick=copyCode(this)>
<i class=icon-file-copy></i>Copy
</button>
<span class="code-language code-action">python</span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>GENDER</span> <span class=o>=</span> <span class=p>{</span><span class=s2>&#34;info_name_m&#34;</span><span class=p>:</span><span class=s2>&#34;M&#34;</span><span class=p>,</span> <span class=s2>&#34;info_name_f&#34;</span><span class=p>:</span><span class=s2>&#34;F&#34;</span><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=n>uri</span> <span class=o>=</span> <span class=s2>&#34;https://www.10000recipe.com/recipe/&#34;</span>
</span></span><span class=line><span class=cl><span class=n>rid_ptn</span> <span class=o>=</span> <span class=s2>&#34;replyReviewDiv_(\d+)&#34;</span>
</span></span><span class=line><span class=cl><span class=n>uid_ptn</span> <span class=o>=</span> <span class=s2>&#34;/profile/review.html\?uid=([\d\w]+)&#34;</span>
</span></span><span class=line><span class=cl><span class=n>date_ptn</span> <span class=o>=</span> <span class=s2>&#34;(\d</span><span class=si>{4}</span><span class=s2>-\d</span><span class=si>{2}</span><span class=s2>-\d</span><span class=si>{2}</span><span class=s2> \d</span><span class=si>{2}</span><span class=s2>:\d</span><span class=si>{2}</span><span class=s2>:\d</span><span class=si>{2}</span><span class=s2>)&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>fetch</span><span class=p>(</span><span class=n>session</span><span class=p>:</span> <span class=n>requests</span><span class=o>.</span><span class=n>Session</span><span class=p>,</span> <span class=n>recipeId</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>List</span><span class=p>[</span><span class=n>Dict</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>    <span class=n>url</span> <span class=o>=</span> <span class=n>uri</span><span class=o>+</span><span class=n>recipeId</span>
</span></span><span class=line><span class=cl>    <span class=n>headers</span> <span class=o>=</span> <span class=n>get_headers</span><span class=p>(</span><span class=n>url</span><span class=p>,</span> <span class=n>referer</span><span class=o>=</span><span class=n>uri</span><span class=o>+</span><span class=s2>&#34;list.html&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>headers</span><span class=p>[</span><span class=s2>&#34;upgrade-insecure-requests&#34;</span><span class=p>]</span> <span class=o>=</span> <span class=s1>&#39;1&#39;</span>
</span></span><span class=line><span class=cl>    <span class=n>response</span> <span class=o>=</span> <span class=n>session</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>url</span><span class=p>,</span> <span class=n>headers</span><span class=o>=</span><span class=n>headers</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>parse</span><span class=p>(</span><span class=n>response</span><span class=o>.</span><span class=n>text</span><span class=p>,</span> <span class=n>recipeId</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>parse</span><span class=p>(</span><span class=n>response</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>recipeId</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>List</span><span class=p>[</span><span class=n>Dict</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>    <span class=n>source</span> <span class=o>=</span> <span class=n>BeautifulSoup</span><span class=p>(</span><span class=n>response</span><span class=p>,</span> <span class=s1>&#39;html.parser&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>reply_divs</span> <span class=o>=</span> <span class=n>source</span><span class=o>.</span><span class=n>select</span><span class=p>(</span><span class=s2>&#34;div.view_reply&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>review_div</span> <span class=o>=</span> <span class=p>[</span><span class=n>div</span> <span class=k>for</span> <span class=n>div</span> <span class=ow>in</span> <span class=n>reply_divs</span> <span class=k>if</span> <span class=n>div</span><span class=o>.</span><span class=n>select_one</span><span class=p>(</span><span class=s2>&#34;div.reply_tit&#34;</span><span class=p>)</span><span class=o>.</span><span class=n>text</span><span class=o>.</span><span class=n>strip</span><span class=p>()</span><span class=o>.</span><span class=n>startswith</span><span class=p>(</span><span class=s2>&#34;요리 후기&#34;</span><span class=p>)]</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=n>review_div</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>review_list</span> <span class=o>=</span> <span class=n>review_div</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span><span class=o>.</span><span class=n>select</span><span class=p>(</span><span class=s2>&#34;div.reply_list&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=p>[</span><span class=n>map_review</span><span class=p>(</span><span class=n>review</span><span class=p>,</span> <span class=n>recipeId</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span> <span class=k>for</span> <span class=n>review</span> <span class=ow>in</span> <span class=n>review_list</span><span class=p>]</span>
</span></span><span class=line><span class=cl>    <span class=k>else</span><span class=p>:</span> <span class=k>return</span> <span class=nb>list</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>map_review</span><span class=p>(</span><span class=n>data</span><span class=p>:</span> <span class=n>Tag</span><span class=p>,</span> <span class=n>recipeId</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Dict</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>review_info</span> <span class=o>=</span> <span class=nb>dict</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=n>review_info</span><span class=p>[</span><span class=s2>&#34;reviewId&#34;</span><span class=p>]</span> <span class=o>=</span> <span class=n>re_get</span><span class=p>(</span><span class=n>rid_ptn</span><span class=p>,</span> <span class=n>data</span><span class=o>.</span><span class=n>select</span><span class=p>(</span><span class=s2>&#34;div&#34;</span><span class=p>)[</span><span class=o>-</span><span class=mi>1</span><span class=p>]</span><span class=o>.</span><span class=n>attrs</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&#34;id&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>    <span class=n>review_info</span><span class=p>[</span><span class=s2>&#34;recipeId&#34;</span><span class=p>]</span> <span class=o>=</span> <span class=n>recipeId</span>
</span></span><span class=line><span class=cl>    <span class=n>review_info</span><span class=p>[</span><span class=s2>&#34;userId&#34;</span><span class=p>]</span> <span class=o>=</span> <span class=n>re_get</span><span class=p>(</span><span class=n>uid_ptn</span><span class=p>,</span> <span class=n>data</span><span class=o>.</span><span class=n>select_one</span><span class=p>(</span><span class=s2>&#34;a&#34;</span><span class=p>)</span><span class=o>.</span><span class=n>attrs</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&#34;href&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>    <span class=n>review_info</span><span class=p>[</span><span class=s2>&#34;contents&#34;</span><span class=p>]</span> <span class=o>=</span> <span class=n>select_text</span><span class=p>(</span><span class=n>data</span><span class=p>,</span> <span class=s2>&#34;p.reply_list_cont&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>detail</span> <span class=o>=</span> <span class=n>data</span><span class=o>.</span><span class=n>select_one</span><span class=p>(</span><span class=s2>&#34;h4.media-heading&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=n>detail</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>review_info</span><span class=p>[</span><span class=s2>&#34;userName&#34;</span><span class=p>]</span> <span class=o>=</span> <span class=n>select_text</span><span class=p>(</span><span class=n>detail</span><span class=p>,</span> <span class=s2>&#34;b&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>gender</span> <span class=o>=</span> <span class=n>detail</span><span class=o>.</span><span class=n>select_one</span><span class=p>(</span><span class=s2>&#34;b&#34;</span><span class=p>)</span><span class=o>.</span><span class=n>attrs</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&#34;class&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>review_info</span><span class=p>[</span><span class=s2>&#34;userGender&#34;</span><span class=p>]</span> <span class=o>=</span> <span class=n>GENDER</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>gender</span><span class=p>[</span><span class=mi>0</span><span class=p>])</span> <span class=k>if</span> <span class=n>gender</span> <span class=k>else</span> <span class=kc>None</span>
</span></span><span class=line><span class=cl>        <span class=n>review_info</span><span class=p>[</span><span class=s2>&#34;createDate&#34;</span><span class=p>]</span> <span class=o>=</span> <span class=n>re_get</span><span class=p>(</span><span class=n>date_ptn</span><span class=p>,</span> <span class=n>detail</span><span class=o>.</span><span class=n>text</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>review_info</span></span></span></code></pre></div></div><p>데이터 수집 결과 아래와 같이 정리된 딕셔너리를 얻을 수 있습니다.</p><p>여기서 요리 후기와 별도로 사용자 명칭과 성별을 추출할 수 있습니다.</p><div class=sc-codeblock data-lang=python><div class=code-actions><button class="code-copy-button code-action" onclick=copyCode(this)>
<i class=icon-file-copy></i>Copy
</button>
<span class="code-language code-action">python</span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;reviewId&#34;</span><span class=p>:</span> <span class=s2>&#34;395018&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;recipeId&#34;</span><span class=p>:</span> <span class=s2>&#34;6843136&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;userId&#34;</span><span class=p>:</span> <span class=s2>&#34;58031746&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;contents&#34;</span><span class=p>:</span> <span class=s2>&#34;정말 간단한데 중불로하니 좀 태워먹었... 맛은 있네욬ㅋㅋㅋㅋㅋ다음엔 중불이랑 약불 사이로 함 더해바야겠어욬ㅋㅋㅋㄱㅋㅋ감삼둥..♡♡&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;userName&#34;</span><span class=p>:</span> <span class=s2>&#34;나찡as&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;userGender&#34;</span><span class=p>:</span> <span class=s2>&#34;F&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;createDate&#34;</span><span class=p>:</span> <span class=s2>&#34;2020-11-09 17:14:02&#34;</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div></div><h3 id=댓글-추출>댓글 추출
<a class=anchor href=#%eb%8c%93%ea%b8%80-%ec%b6%94%ec%b6%9c>#</a></h3><p>레시피 상세 정보 페이지에서 댓글은 미리보기만이 제공되며
전체 댓글을 확인하기 위해서는 별도의 페이지에 접속해야 합니다.</p><p>해당 페이지의 출력 결과에서도 요리 후기와 같은 방식으로
HTML 소스를 파싱하여 대상 문자열을 추출해야 합니다.</p><div class=sc-codeblock data-lang=python><div class=code-actions><button class="code-copy-button code-action" onclick=copyCode(this)>
<i class=icon-file-copy></i>Copy
</button>
<span class="code-language code-action">python</span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>GENDER</span> <span class=o>=</span> <span class=p>{</span><span class=s2>&#34;info_name_m&#34;</span><span class=p>:</span><span class=s2>&#34;M&#34;</span><span class=p>,</span> <span class=s2>&#34;info_name_f&#34;</span><span class=p>:</span><span class=s2>&#34;F&#34;</span><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=n>uri</span> <span class=o>=</span> <span class=s2>&#34;https://www.10000recipe.com/recipe/&#34;</span>
</span></span><span class=line><span class=cl><span class=n>cid_ptn</span> <span class=o>=</span> <span class=s2>&#34;replyCommentDiv_(\d+)&#34;</span>
</span></span><span class=line><span class=cl><span class=n>uid_ptn</span> <span class=o>=</span> <span class=s2>&#34;/profile/recipe_comment.html\?uid=([\d\w]+)&#34;</span>
</span></span><span class=line><span class=cl><span class=n>date_ptn</span> <span class=o>=</span> <span class=s2>&#34;(\d</span><span class=si>{4}</span><span class=s2>-\d</span><span class=si>{2}</span><span class=s2>-\d</span><span class=si>{2}</span><span class=s2> \d</span><span class=si>{2}</span><span class=s2>:\d</span><span class=si>{2}</span><span class=s2>)&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>fetch</span><span class=p>(</span><span class=n>session</span><span class=p>:</span> <span class=n>requests</span><span class=o>.</span><span class=n>Session</span><span class=p>,</span> <span class=n>recipeId</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>page</span><span class=o>=</span><span class=mi>1</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>List</span><span class=p>[</span><span class=n>Dict</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>    <span class=n>url</span> <span class=o>=</span> <span class=n>uri</span><span class=o>+</span><span class=s2>&#34;ajax.html&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>params</span> <span class=o>=</span> <span class=nb>dict</span><span class=p>(</span><span class=n>q_mode</span><span class=o>=</span><span class=s2>&#34;getListComment&#34;</span><span class=p>,</span> <span class=n>seq</span><span class=o>=</span><span class=n>recipeId</span><span class=p>,</span> <span class=n>page</span><span class=o>=</span><span class=n>page</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>headers</span> <span class=o>=</span> <span class=n>get_headers</span><span class=p>(</span><span class=n>url</span><span class=p>,</span> <span class=n>referer</span><span class=o>=</span><span class=n>uri</span><span class=o>+</span><span class=n>recipeId</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>headers</span><span class=p>[</span><span class=s2>&#34;upgrade-insecure-requests&#34;</span><span class=p>]</span> <span class=o>=</span> <span class=s1>&#39;1&#39;</span>
</span></span><span class=line><span class=cl>    <span class=n>response</span> <span class=o>=</span> <span class=n>session</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>url</span><span class=p>,</span> <span class=n>params</span><span class=o>=</span><span class=n>params</span><span class=p>,</span> <span class=n>headers</span><span class=o>=</span><span class=n>headers</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>parse</span><span class=p>(</span><span class=n>response</span><span class=o>.</span><span class=n>text</span><span class=p>,</span> <span class=n>recipeId</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>parse</span><span class=p>(</span><span class=n>response</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>recipeId</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>List</span><span class=p>[</span><span class=n>Dict</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>    <span class=n>source</span> <span class=o>=</span> <span class=n>BeautifulSoup</span><span class=p>(</span><span class=n>response</span><span class=p>,</span> <span class=s1>&#39;html.parser&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>comment_list</span> <span class=o>=</span> <span class=n>source</span><span class=o>.</span><span class=n>select</span><span class=p>(</span><span class=s2>&#34;div.reply_list&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=p>[</span><span class=n>map_comment</span><span class=p>(</span><span class=n>comment</span><span class=p>,</span> <span class=n>recipeId</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span> <span class=k>for</span> <span class=n>comment</span> <span class=ow>in</span> <span class=n>comment_list</span><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>map_comment</span><span class=p>(</span><span class=n>data</span><span class=p>:</span> <span class=n>Tag</span><span class=p>,</span> <span class=n>recipeId</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Dict</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>comment_info</span> <span class=o>=</span> <span class=nb>dict</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=n>comment_info</span><span class=p>[</span><span class=s2>&#34;commentId&#34;</span><span class=p>]</span> <span class=o>=</span> <span class=n>re_get</span><span class=p>(</span><span class=n>cid_ptn</span><span class=p>,</span> <span class=n>data</span><span class=o>.</span><span class=n>select</span><span class=p>(</span><span class=s2>&#34;div&#34;</span><span class=p>)[</span><span class=o>-</span><span class=mi>1</span><span class=p>]</span><span class=o>.</span><span class=n>attrs</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&#34;id&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>    <span class=n>comment_info</span><span class=p>[</span><span class=s2>&#34;recipeId&#34;</span><span class=p>]</span> <span class=o>=</span> <span class=n>recipeId</span>
</span></span><span class=line><span class=cl>    <span class=n>comment_info</span><span class=p>[</span><span class=s2>&#34;userId&#34;</span><span class=p>]</span> <span class=o>=</span> <span class=n>re_get</span><span class=p>(</span><span class=n>uid_ptn</span><span class=p>,</span> <span class=n>data</span><span class=o>.</span><span class=n>select_one</span><span class=p>(</span><span class=s2>&#34;a&#34;</span><span class=p>)</span><span class=o>.</span><span class=n>attrs</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&#34;href&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>    <span class=n>comment_info</span><span class=p>[</span><span class=s2>&#34;contents&#34;</span><span class=p>]</span> <span class=o>=</span> <span class=n>select_text</span><span class=p>(</span><span class=n>data</span><span class=p>,</span> <span class=s2>&#34;div.media-body&#34;</span><span class=p>)</span><span class=o>.</span><span class=n>split</span><span class=p>(</span><span class=s1>&#39;|&#39;</span><span class=p>)[</span><span class=o>-</span><span class=mi>1</span><span class=p>]</span>
</span></span><span class=line><span class=cl>    <span class=n>detail</span> <span class=o>=</span> <span class=n>data</span><span class=o>.</span><span class=n>select_one</span><span class=p>(</span><span class=s2>&#34;h4.media-heading&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=n>detail</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>comment_info</span><span class=p>[</span><span class=s2>&#34;userName&#34;</span><span class=p>]</span> <span class=o>=</span> <span class=n>select_text</span><span class=p>(</span><span class=n>detail</span><span class=p>,</span> <span class=s2>&#34;b&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>gender</span> <span class=o>=</span> <span class=n>detail</span><span class=o>.</span><span class=n>select_one</span><span class=p>(</span><span class=s2>&#34;b&#34;</span><span class=p>)</span><span class=o>.</span><span class=n>attrs</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&#34;class&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>comment_info</span><span class=p>[</span><span class=s2>&#34;userGender&#34;</span><span class=p>]</span> <span class=o>=</span> <span class=n>GENDER</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>gender</span><span class=p>[</span><span class=mi>0</span><span class=p>])</span> <span class=k>if</span> <span class=n>gender</span> <span class=k>else</span> <span class=kc>None</span>
</span></span><span class=line><span class=cl>        <span class=n>comment_info</span><span class=p>[</span><span class=s2>&#34;createDate&#34;</span><span class=p>]</span> <span class=o>=</span> <span class=n>re_get</span><span class=p>(</span><span class=n>date_ptn</span><span class=p>,</span> <span class=n>detail</span><span class=o>.</span><span class=n>text</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>comment_info</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>review</span> <span class=o>=</span> <span class=n>fetch</span><span class=p>(</span><span class=n>session</span><span class=p>,</span> <span class=s2>&#34;6843136&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>review</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span></span></span></code></pre></div></div><p>데이터 수집 결과 아래와 같이 정리된 딕셔너리를 얻을 수 있습니다.</p><p>데이터 구조는 요리 후기와 동일합니다.</p><div class=sc-codeblock data-lang=python><div class=code-actions><button class="code-copy-button code-action" onclick=copyCode(this)>
<i class=icon-file-copy></i>Copy
</button>
<span class="code-language code-action">python</span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;commentId&#34;</span><span class=p>:</span> <span class=s2>&#34;39693405&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;recipeId&#34;</span><span class=p>:</span> <span class=s2>&#34;6843136&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;userId&#34;</span><span class=p>:</span> <span class=s2>&#34;89382542&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;contents&#34;</span><span class=p>:</span> <span class=s2>&#34;신고그러네여..재료양이..ㅜ&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;userName&#34;</span><span class=p>:</span> <span class=s2>&#34;휘아여&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;userGender&#34;</span><span class=p>:</span> <span class=s2>&#34;F&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;createDate&#34;</span><span class=p>:</span> <span class=s2>&#34;2022-03-18 00:02&#34;</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div></div></article><footer class=site-footer><div class=tags-wrap><a href="/search/?tags=%ed%81%ac%eb%a1%a4%eb%a7%81" class=tag>#크롤링</a>
<a href="/search/?tags=Python" class=tag>#Python</a>
<a href="/search/?tags=BeautifulSoup" class=tag>#BeautifulSoup</a>
<a href="/search/?tags=requests" class=tag>#requests</a>
<a href="/search/?tags=%ec%9b%b9%20%ec%8a%a4%ed%81%ac%eb%9e%98%ed%95%91" class=tag>#웹 스크래핑</a>
<a href="/search/?tags=%eb%8d%b0%ec%9d%b4%ed%84%b0%20%ec%88%98%ec%a7%91" class=tag>#데이터 수집</a>
<a href="/search/?tags=JSON" class=tag>#JSON</a>
<a href="/search/?tags=%ec%9b%b9%20%ec%9e%90%eb%8f%99%ed%99%94" class=tag>#웹 자동화</a>
<a href="/search/?tags=%eb%a7%8c%ea%b0%9c%ec%9d%98%20%eb%a0%88%ec%8b%9c%ed%94%bc" class=tag>#만개의 레시피</a></div><div class=prev-next-wrap><a href=/blog/smartstore-login-3/ class=prev-link><span class=prev-next-label><i class=icon-backward></i>
<span data-i18n-id=post.prev.link data-i18n-text>이전</span>
</span><span class=prev-next-title>[Python] requests로 네이버 스마트스토어센터 로그인 구현하기 (3)</span>
</a><a href=/blog/airflow-study-1/ class=next-link><span class=prev-next-label><span data-i18n-id=post.next.link data-i18n-text>다음</span>
<i class=icon-forward></i>
</span><span class=prev-next-title>Apache Airflow - 설치하기 (Docker Compose)</span></a></div><div class=comments-wrap><div id=disqus_thread></div><script>var disqus_config=function(){this.page.url="https://minyeamer.github.io/blog/10000-recipe/",this.page.identifier="https://minyeamer.github.io/blog/10000-recipe/"};window.relocateDisqus=()=>{let e=0;const t=20,n=setInterval(()=>{e++;const s=document.getElementById(atob(atob("WkdsemNYVnpYM1JvY21WaFpBPT0=")));var o=!1;if(s){const e=s.querySelector(atob(atob("VzNOeVl5bzlKMkZrY3lkZA==")));e&&(s.appendChild(e),o=!0)}(o||e>t)&&clearInterval(n)},1e3)},function(){var e=document,t=e.createElement("script");t.src="https://minyeamer.disqus.com/embed.js",t.setAttribute("data-timestamp",+new Date),(e.head||e.body).appendChild(t)}(),window.relocateDisqus();function reloadDisqus(){window.DISQUS&&(DISQUS.reset({reload:!0,config:function(){this.page.url="https://minyeamer.github.io/blog/10000-recipe/",this.page.identifier="https://minyeamer.github.io/blog/10000-recipe/"}}),window.relocateDisqus())}</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript></div><div class="copyright-wrap flex justify-center"><small>Minystory - <a href=https://creativecommons.org/licenses/by/4.0/legalcode target=_blank rel="noopener noreferrer">© CC BY 4.0</a></small></div></footer><label for=menu-control class="hidden site-menu-overlay"></label></div><aside class=site-toc aria-label=목차 data-i18n-id=toc.aside.tooltip data-i18n-attrs=aira-label><div class=toc-content><nav id=TableOfContents><ul><li><a href=#스키마-구성>스키마 구성</a></li><li><a href=#만개의-레시피-데이터-수집>만개의 레시피 데이터 수집</a><ul><li><a href=#카테고리-추출>카테고리 추출</a></li><li><a href=#레시피-목록-추출>레시피 목록 추출</a></li><li><a href=#레시피-정보-추출>레시피 정보 추출</a></li><li><a href=#요리-후기-추출>요리 후기 추출</a></li><li><a href=#댓글-추출>댓글 추출</a></li></ul></li></ul></nav></div><div class=hidden id=toc-config data-start=2 data-end=3></div></aside><div class=site-toolbar role=toolbar aria-label="툴바'" data-i18n-id=toolbar.wrap.tooltip data-i18n-attrs=aira-label><input type=checkbox id=toolbar-toggle class="hidden toggle"><div class=toolbar-items><div class="toolbar-button i18n-button"><i class=icon-globe></i>
<select class=i18n-selector id=i18n-selector aria-label="i18n `toolbar.i18n.tooltip` | default `Select language`" title="i18n `toolbar.i18n.tooltip` | default `Select language`" data-i18n-id=toolbar.i18n.tooltip data-i18n-attrs=aria-label,title><option value=ko>한국어</option><option value=en>English</option><option value=ja>日本語</option><option value=zh>中文</option><option value=es>Español</option><option value=fr>Français</option><option value=de>Deutsch</option><option value=it>Italiano</option><option value=pt>Português</option><option value=ru>Русский</option><option value=am>አማርኛ</option><option value=bg>Български</option><option value=bn>বাংলা</option><option value=cn>简体中文</option><option value=cs>Čeština</option><option value=fa>فارسی</option><option value=he>עברית</option><option value=nb>Norsk</option><option value=nl>Nederlands</option><option value=oc>Occitan</option><option value=pl>Polski</option><option value=pt-BR>Português (BR)</option><option value=sv>Svenska</option><option value=sw>Kiswahili</option><option value=tr>Türkçe</option><option value=uk>Українська</option><option value=zh-TW>繁體中文</option></select></div><button class=toolbar-button onclick='window.scrollTo({top:0,behavior:"smooth"})' aria-label="i18n `toolbar.top.tooltip` | default `Go to top`" title="i18n `toolbar.top.tooltip` | default `Go to top`" data-i18n-id=toolbar.top.tooltip data-i18n-attrs=aria-label,title>
<i class=icon-chevron-up></i>
</button>
<button class=toolbar-button onclick='window.scrollTo({top:document.body.scrollHeight,behavior:"smooth"})' aria-label="i18n `toolbar.bottom.tooltip` | default `Go to bottom`" title="i18n `toolbar.bottom.tooltip` | default `Go to bottom`" data-i18n-id=toolbar.bottom.tooltip data-i18n-attrs=aria-label,title>
<i class=icon-chevron-down></i>
</button>
<button class=toolbar-button onclick=history.back() aria-label="i18n `toolbar.back.tooltip` | default `Go back`" title="i18n `toolbar.back.tooltip` | default `Go back`" data-i18n-id=toolbar.back.tooltip data-i18n-attrs=aria-label,title>
<i class=icon-arrow-left></i></button></div><label for=toolbar-toggle class="toolbar-button toolbar-toggle-label"><i class="icon-plus icon-expand"></i>
<i class="icon-xmark icon-collapse"></i></label></div></main></body></html>