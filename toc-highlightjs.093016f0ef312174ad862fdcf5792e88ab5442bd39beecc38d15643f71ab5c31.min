document.addEventListener("DOMContentLoaded",function(){const e=document.querySelectorAll("h2[id], h3[id]");function t(){const e=document.querySelector(".book-toc");if(e){const t=window.getComputedStyle(e);if(t.visibility==="visible")return e.querySelector("#TableOfContents")}return document.querySelector("#TableOfContents")}const n=new IntersectionObserver(e=>{e.forEach(e=>{const o=e.target.getAttribute("id"),n=t(),i=n.querySelectorAll("a"),s=n.querySelector(`a[href="#${o}"]`);s&&e.isIntersecting&&(i.forEach(e=>e.classList.remove("active")),s.classList.add("active"))})},{rootMargin:"0px 0px -70% 0px"});e.forEach(e=>{n.observe(e)})})