(function(){"use strict";const e=document.querySelector("#search-input"),n=document.querySelector("#search-input-results");if(!e)return;e.addEventListener("focus",s),e.addEventListener("keyup",o),e.addEventListener("keydown",r),e.addEventListener("blur",()=>setTimeout(t,200)),document.addEventListener("keypress",i);function i(t){if(t.target.value!==0[0])return;if(e===document.activeElement)return;const n=String.fromCharCode(t.charCode);if(!a(n))return;e.focus(),t.preventDefault()}function a(t){const n=e.getAttribute("data-hotkeys")||"";return n.indexOf(t)>=0}function r(n){n.key==="Escape"&&(t(),e.blur())}function t(){n.replaceChildren()}function s(){e.removeEventListener("focus",s),e.required=!0,window.siteSearch.initIndex().then(()=>e.required=!1).then(o)}function o(){if(t(),!e.value)return;const s=window.siteSearch.index.search(e.value),i=s.slice(0,3),o=document.createDocumentFragment();if(i.forEach(e=>{const n=document.createElement("li"),t=document.createElement("a");t.href=e.item.href,t.textContent=e.item.title,n.appendChild(t),o.appendChild(n)}),s.length>3){const t=document.createElement("li");t.className="search-more";const n=document.createElement("a");n.href=`/search/?query=${encodeURIComponent(e.value)}`;const i=`더 보기 (총 %d개)`;n.textContent=i.replace("%d",s.length),t.appendChild(n),o.appendChild(t)}n.appendChild(o)}})()