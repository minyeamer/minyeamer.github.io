(function(){"use strict";const a=document.querySelector("#search-input"),c=document.querySelector(".menu-search"),i=document.querySelector(".mobile-search");let e,n,s,t;if(!a&&!i)return;c&&(c.addEventListener("click",o),c.addEventListener("keydown",e=>{(e.key==="Enter"||e.key===" ")&&(e.preventDefault(),o())})),i&&(i.addEventListener("click",o),i.addEventListener("keydown",e=>{(e.key==="Enter"||e.key===" ")&&(e.preventDefault(),o())})),document.addEventListener("keypress",u);function o(){t||d(),(!window.siteSearch||!window.siteSearch.index)&&(e.required=!0,window.siteSearch.initIndex().then(()=>e.required=!1)),s.classList.add("active"),t.classList.add("active"),e.focus()}function r(){if(!t)return;s.classList.remove("active"),t.classList.remove("active"),e.value="",l()}function d(){s=document.createElement("div"),s.className="search-overlay",s.addEventListener("click",r),t=document.createElement("div"),t.className="search-modal";const c=document.createElement("div");c.className="search-modal-header";const u=document.createElement("h3");u.textContent="검색",c.appendChild(u);const i=document.createElement("button");i.className="search-modal-close",i.innerHTML='<i class="fa-solid fa-xmark"></i>',i.setAttribute("aria-label","Close"),i.addEventListener("click",r),c.appendChild(i),t.appendChild(c);const l=document.createElement("div");l.className="search-modal-input-container",e=document.createElement("input"),e.type="text",e.id="search-modal-input",e.placeholder=a.getAttribute("placeholder")||"Search",e.setAttribute("aria-label","Search"),e.maxLength=64,e.addEventListener("keyup",m),e.addEventListener("keydown",t=>{t.key==="Escape"?r():t.key==="Enter"&&e.value.trim()&&(window.location.href="/search/?query="+encodeURIComponent(e.value.trim()))}),l.appendChild(e);const o=document.createElement("button");o.type="button",o.className="search-modal-button",o.innerHTML='<i class="fa-solid fa-magnifying-glass"></i>',o.setAttribute("aria-label","Search"),o.addEventListener("click",()=>{e.value.trim()&&(window.location.href="/search/?query="+encodeURIComponent(e.value.trim()))}),l.appendChild(o),t.appendChild(l),n=document.createElement("ul"),n.className="search-modal-results",t.appendChild(n);const d=document.createElement("div");d.className="search-modal-footer",d.style.display="none",t.appendChild(d),document.body.appendChild(s),document.body.appendChild(t),document.addEventListener("keydown",e=>{e.key==="Escape"&&t.classList.contains("active")&&r()})}function u(e){if(e.target.value!==0[0])return;if(t&&t.classList.contains("active"))return;const n=String.fromCharCode(e.charCode);if(!h(n))return;o(),e.preventDefault()}function h(e){if(a){const t=a.getAttribute("data-hotkeys")||"";return t.indexOf(e)>=0}return!1}function l(){if(n&&n.replaceChildren(),t){const e=t.querySelector(".search-modal-footer");e&&(e.style.display="none")}}function m(){if(l(),!e||!e.value)return;if(!window.siteSearch||!window.siteSearch.index)return;const s=window.siteSearch.index.search(e.value),a=Math.min(s.length,10),r=s.slice(0,a),i=document.createDocumentFragment();r.forEach(e=>{const n=document.createElement("li");n.className="search-result-item";const t=document.createElement("a");t.href=e.item.href;const s=document.createElement("div");if(s.className="search-result-title",s.textContent=e.item.title,t.appendChild(s),e.item.content){const n=document.createElement("div");n.className="search-result-content";const s=e.item.content.length>150?e.item.content.substring(0,150)+"...":e.item.content;n.textContent=s,t.appendChild(n)}n.appendChild(t),i.appendChild(n)}),n.appendChild(i);const o=t.querySelector(".search-modal-footer");if(s.length>=5){o.style.display="block",o.innerHTML="";const t=document.createElement("div");t.className="search-more";const n=document.createElement("a");n.href=`/search/?query=${encodeURIComponent(e.value)}`;const i=`전체 %d개 결과 보기`;n.textContent=i.replace("%d",s.length),t.appendChild(n),o.appendChild(t)}else o.style.display="none"}})()